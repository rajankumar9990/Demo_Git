package com.healthcare.stepdefinitions;

import com.healthcare.pages.RegistrationPage;
import com.healthcare.utils.ConfigReader;
import com.healthcare.utils.DriverFactory;
import io.cucumber.java.en.*;
import org.openqa.selenium.WebDriver;

public class RegistrationSteps {
    private WebDriver driver;
    private RegistrationPage registrationPage;

    @Given("user is on the registration page")
    public void user_is_on_the_registration_page() {
        driver = DriverFactory.getDriver();
        driver.get(ConfigReader.getProperty("registerUrl"));
        registrationPage = new RegistrationPage();
    }

    @When("user enters username {string} email {string} and password {string}")
    public void user_enters_username_email_and_password(String username, String email, String password) {
        // calling register() will enter details and click the button
        registrationPage.register(username, email, password);
    }

    @And("clicks the register button")
    public void clicks_the_register_button() {
        // already clicked inside register(), so nothing extra here
        // if you want, you can just leave it empty
    }

    @Then("registration should be successful")
    public void registration_should_be_successful() {
        assert registrationPage.isRegistrationSuccessful() : "Registration failed!";
    }

    @And("user closes the browser")
    public void user_closes_the_browser() throws InterruptedException {
        Thread.sleep(2000);
        driver.quit();
    }
}
